<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì‚¬ë‹¤ë¦¬ê²Œì„ ì• ë‹ˆë©”ì´ì…˜ + ìŒë£Œ</title>
  <style>
    body { margin:0; display:flex; flex-direction:column; align-items:center; font-family:sans-serif; }
    canvas { background:#fff; margin-top:1rem; }
    #controls { margin:1rem; }
    button{padding:.5rem 1rem;font-size:1rem;}
    #results { margin:1rem; }
    #results ul { list-style:none; padding:0; }
    #results li { margin:0.3rem 0; }
  </style>
</head>
<body>

  <div id="controls">
    <button id="startBtn">ì‚¬ë‹¤ë¦¬ íƒ€ê¸°</button>
  </div>

  <canvas id="ladder" width="320" height="480"></canvas>

  <div id="results"></div>

  <script>
  // 1) ì°¸ê°€ì + ìŒë£Œ + ì»¬ëŸ¬ (ì»¬ëŸ¬ëŠ” í”„ë¡œí•„ ëŒ€ì²´)
  const participants = [
    { name:"Jinsoo", drink:"ì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸", color:"#f44" },
    { name:"ì„¸ë¯¸",   drink:"ì›í•˜ëŠ” ìŒë£Œ ì„ íƒ!!!", color:"#4a4" },
    { name:"êµ¬ìê±´", drink:"ì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸", color:"#44f" },
    { name:"ê¹€ë§Œì„±", drink:"ì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸", color:"#fa0" },
    { name:"ê¹€ì„¸ë´‰", drink:"ì›í•˜ëŠ” ìŒë£Œ ì„ íƒ!!!", color:"#f4a" },
    { name:"ê¹€ì² ë™", drink:"ì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸", color:"#4af" },
    { name:"ê¹€íƒœí˜¸", drink:"ì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸", color:"#a4f" },
    { name:"ì‹ ìœ ì„ ", drink:"ì›í•˜ëŠ” ìŒë£Œ ì„ íƒ!!!", color:"#0af" },
    { name:"ê°€ë³´ìê³ ~~", drink:"ì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸", color:"#fa4" },
    { name:"ì—„ê¸°ì¢…", drink:"ì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸", color:"#4fa" },
    { name:"ì´ì¬ìŠ¹", drink:"ì•„ìƒ·ì¶” 2ì” with someone...", color:"#af4" },
    { name:"ì „ë•ì„±(ë² ë“œë¡œ)", drink:"ì•„ì´ìŠ¤ì•„ë©”ë¦¬ì¹´ë…¸", color:"#aaa" }
  ];
  // ë²Œì¹™ì
  const punishment = { name:"ì„ìƒí˜", drink:"ì¶•~ë‹¹ì²¨: ë”¸ê¸°ìš”ê±°íŠ¸ìƒ·ì¶”ê°€", color:"#f00" };

  const cols = participants.length + 1; // ë²Œì¹™ì ìë¦¬ í¬í•¨
  const rows = 12;
  const canvas = document.getElementById("ladder");
  const ctx = canvas.getContext("2d");
  const w = canvas.width, h = canvas.height;
  const margin = 40;
  const colW = (w - margin*2)/(cols-1);
  const rowH = (h - margin*2)/(rows);

  // 2) ëœë¤ ì‚¬ë‹¤ë¦¬ ê°€ë¡œì¤„
  const rungs = [];
  for(let y=0; y<rows; y++){
    rungs[y]=[];
    for(let x=0; x<cols-1; x++){
      rungs[y][x] = Math.random()<0.4;
    }
  }

  // 3) ì‚¬ë‹¤ë¦¬íŒ ë Œë”
  function drawLadder(){
    ctx.clearRect(0,0,w,h);
    ctx.lineWidth=2; ctx.strokeStyle="#888";
    // ì„¸ë¡œì¤„
    for(let i=0;i<cols;i++){
      let x = margin + i*colW;
      ctx.beginPath(); ctx.moveTo(x,margin); ctx.lineTo(x,h-margin); ctx.stroke();
    }
    // ê°€ë¡œì¤„
    for(let y=0;y<rows;y++){
      for(let x=0;x<cols-1;x++){
        if(rungs[y][x]){
          let x1 = margin + x*colW, y1 = margin + y*rowH;
          ctx.beginPath(); ctx.moveTo(x1,y1); ctx.lineTo(x1+colW,y1); ctx.stroke();
        }
      }
    }
  }

  // 4) ê²½ë¡œ ê³„ì‚° (ì°¸ê°€ì+ë²Œì¹™ì)
  function computePaths(){
    const all = [punishment, ...participants];
    return all.map((_,i)=>{
      let cx=i, cy=0, path=[{x:cx,y:cy}];
      while(cy<rows){
        if(cx<cols-1 && rungs[cy][cx]) cx++;
        else if(cx>0 && rungs[cy][cx-1]) cx--;
        cy++;
        path.push({x:cx,y:cy});
      }
      return path;
    });
  }

  // 5) ì• ë‹ˆë©”ì´ì…˜ + ê²°ê³¼ í‘œì‹œ
  function animate(){
    drawLadder();
    const paths = computePaths();
    let step=0, maxStep=rows+1;

    function frame(){
      drawLadder();
      // ì•„ì´ì½˜ ê·¸ë¦¬ê¸°
      paths.forEach((path,i)=>{
        let pos = path[Math.min(step,maxStep)];
        let px = margin + pos.x*colW, py = margin + pos.y*rowH;
        ctx.beginPath(); ctx.fillStyle = (i===0?punishment.color:participants[i-1].color);
        ctx.arc(px,py,10,0,2*Math.PI); ctx.fill();
        // ì´ë¦„ ë¨¸ë¦¬ê¸€ì
        ctx.fillStyle="#fff"; ctx.font="10px sans-serif";
        let ch = (i===0?'âš¡':participants[i-1].name[0]);
        ctx.fillText(ch, px-3, py+3);
      });
      step++;
      if(step<=maxStep){
        requestAnimationFrame(frame);
      } else {
        showResults();
      }
    }
    frame();
  }

  // 6) ê²°ê³¼ í…ìŠ¤íŠ¸ ë¿Œë¦¬ê¸°
  function showResults(){
    const container = document.getElementById("results");
    container.innerHTML = "<h2>ğŸ¹ ìŒë£Œ ë‚´ì—­</h2><ul>" +
      `<li>âš¡ ${punishment.name} â†’ ${punishment.drink}</li>` +
      participants.map(p=>
        `<li>â€¢ ${p.name} â†’ ${p.drink}</li>`
      ).join("") +
    "</ul>";
  }

  // ì´ˆê¸° ë Œë”
  drawLadder();
  document.getElementById("startBtn").onclick = animate;
  </script>
</body>
</html>
